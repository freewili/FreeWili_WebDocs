"use strict";(self.webpackChunkfreewili_docs=self.webpackChunkfreewili_docs||[]).push([[9477],{8073:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var s=n(4848),t=n(8453);const r={sidebar_position:3},a="Displaying Images",o={id:"gui-screen-buttons-and-lights/displaying-images",title:"Displaying Images",description:"FREE-WiLi allows you to display images on the screen. FREE-WiLi has some built in images but a more interesting user interface can be done with custom images.",source:"@site/docs/gui-screen-buttons-and-lights/displaying-images.md",sourceDirName:"gui-screen-buttons-and-lights",slug:"/gui-screen-buttons-and-lights/displaying-images",permalink:"/gui-screen-buttons-and-lights/displaying-images",draft:!1,unlisted:!1,editUrl:"https://github.com/freewili/FreeWili_WebDocs/blob/main/docs/gui-screen-buttons-and-lights/displaying-images.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Making sounds",permalink:"/gui-screen-buttons-and-lights/making-sounds"},next:{title:"Accelerometer",permalink:"/gui-screen-buttons-and-lights/accelerometer"}},l={},d=[{value:"Displaying Images from the API",id:"displaying-images-from-the-api",level:2},{value:"Structure of Image File",id:"structure-of-image-file",level:2},{value:"Binary Header",id:"binary-header",level:2},{value:"Pixel Data",id:"pixel-data",level:2}];function c(e){const i={code:"code",em:"em",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h1,{id:"displaying-images",children:"Displaying Images"}),"\n",(0,s.jsx)(i.p,{children:"FREE-WiLi allows you to display images on the screen. FREE-WiLi has some built in images but a more interesting user interface can be done with custom images."}),"\n",(0,s.jsx)(i.p,{children:'Custom images can be loaded into the FREE-WiLi display processor file system. Then, using the API they can be displayed on command. They images should be stored in the "images" directory.'}),"\n",(0,s.jsx)(i.p,{children:"Custom images first must be converted to the FREE-WiLi Image format. This is basically a bitmap that is compatible with the 565 color display used. The direct compatibility allows fast display of images without any runtime conversion."}),"\n",(0,s.jsx)(i.p,{children:"A python script is written called fw_image.py that can convert a jpg or png to a FWI file. A FWI file is the image file you will download to FREE-WiLi."}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"Syntax of fw_image.py:"})})}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"python3 fw_image.py source_image.png output_image.fwi"})}),"\n",(0,s.jsx)(i.h2,{id:"displaying-images-from-the-api",children:"Displaying Images from the API"}),"\n",(0,s.jsxs)(i.p,{children:["The GUIAPI has a function for displaying images. Here we display ",(0,s.jsx)(i.code,{children:"cookie.fwi"})," in the images directory."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:'obGUIAPI.addControlPictureFromFile(iPanelNumber,PANEL_PICTURE_COOKIE,20,160,"cookie",1 );'})}),"\n",(0,s.jsx)("div",{class:"text--center",children:(0,s.jsx)("figure",{children:(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.img,{alt:"Cookie.fwi shown on FREE-WiLi screen.",src:n(4284).A+"",title:"Cookie.fwi shown on FREE-WiLi screen.",width:"481",height:"360"}),"\r\n",(0,s.jsx)("figcaption",{children:"Cookie.fwi shown on FREE-WiLi screen."})]})})}),"\n",(0,s.jsx)(i.h2,{id:"structure-of-image-file",children:"Structure of Image File"}),"\n",(0,s.jsxs)(i.p,{children:["The file consists of a binary header describing the file and the pixels. The pixels are stored in 16 bit 565 format. The 565 16 bit color format is a common format in embedded systems. There are a number of resources online that discuss this format. The best way to understand the format is to review the source code of ",(0,s.jsx)(i.code,{children:"fw_image.py"})]}),"\n",(0,s.jsx)(i.h2,{id:"binary-header",children:"Binary Header"}),"\n",(0,s.jsx)(i.p,{children:"The beginning of the file is below. Ints are 32 bit here and shorts are 16 bit."}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-c",children:'char szOut[8] = { "FW01IMG" };\r\nunsigned int iImageFlags;\r\nunsigned int iImageTotalPixelCount;\r\nunsigned short iImageWidth;\r\nunsigned short iImageHeight;\r\nunsigned short iImageTransparentColor;\r\nunsigned short iImageId;\n'})}),"\n",(0,s.jsx)(i.h2,{id:"pixel-data",children:"Pixel Data"}),"\n",(0,s.jsx)(i.p,{children:"The pixel data is described below. A 16 bit unsigned short contains the pixel with varying intensities for Red, Green, and Blue. The final value is byte swapped."}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"rgb = (int(R)<<11) | (int(G)<<5) | int(B)"})," ",(0,s.jsx)("br",{}),"\r\n",(0,s.jsx)(i.code,{children:"rgb = ((rgb << 8) & 0xFF00) | ((rgb >> 8) & 0xFF);"})]})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},4284:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/cookie-fwi-cf9d953944314d13f0e9023ee5305705.jpg"},8453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>o});var s=n(6540);const t={},r=s.createContext(t);function a(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);